import { LibConfig } from '../config/lib-config';
import { camelCase, capitalize, isEmpty } from 'lodash-es';
/* tslint:disable:variable-name no-console */
export class ConsoleLogger {
    static info(message, ...optionalParams) {
        if (!this.isLoggingEnabled()) {
            return;
        }
        console.info(message, ...optionalParams);
    }
    static warn(message, ...optionalParams) {
        if (!this.isLoggingEnabled()) {
            return;
        }
        console.warn(message, ...optionalParams);
    }
    static error(message, ...optionalParams) {
        if (!this.isLoggingEnabled()) {
            return;
        }
        console.error(message, ...optionalParams);
    }
    /**
     * Log info messages in pretty format.
     *
     * @param message log message
     * @param params additional params for verbose log
     */
    static prettyInfo(message, params) {
        if (!this.isLoggingEnabled()) {
            return;
        }
        let msg = `%c${message}\n`;
        const color = [
            'color: #201AB3;'
        ];
        if (!isEmpty(params)) {
            for (const [key, value] of Object.entries(params)) {
                if (key.toLowerCase() === 'result') {
                    msg += `%c${capitalize(key)}: %c${value}\n`;
                    color.push('color: #3AA6D0;', 'color: #00BA45;');
                }
                else {
                    msg += `%c${camelCase(key)}: %c${value}\n`;
                    color.push('color: #3AA6D0;', 'color: default;');
                }
            }
        }
        ConsoleLogger.info(msg, ...color);
    }
    static objectPrettyInfo(message, params) {
        if (!this.isLoggingEnabled()) {
            return;
        }
        const msg = `%c${message}\n`;
        const color = [
            'color: #201AB3;'
        ];
        ConsoleLogger.info(msg, ...color, params);
    }
    /**
     * Log resource info messages in pretty format.
     *
     * @param message log message
     * @param resourceName resource name
     * @param params additional params for verbose log
     */
    static resourcePrettyInfo(resourceName, message, params) {
        if (!this.isLoggingEnabled()) {
            return;
        }
        let msg = `%c${resourceName} %c${message}\n`;
        const color = [
            'color: #DA005C;',
            'color: #201AB3;'
        ];
        if (!isEmpty(params)) {
            for (const [key, value] of Object.entries(params)) {
                if (key.toLowerCase() === 'result') {
                    msg += `%c${capitalize(key)}: %c${value}\n`;
                    color.push('color: #3AA6D0;', 'color: #00BA45;');
                }
                else {
                    msg += `%c${camelCase(key)}: %c${value}\n`;
                    color.push('color: #3AA6D0;', 'color: default;');
                }
            }
        }
        ConsoleLogger.info(msg, ...color);
    }
    /**
     * Log error messages in pretty format.
     *
     * @param message log message
     * @param params additional params for verbose log
     */
    static prettyError(message, params) {
        if (!this.isLoggingEnabled()) {
            return;
        }
        let msg = `%c${message}\n`;
        const color = [
            'color: #df004f;'
        ];
        if (!isEmpty(params)) {
            for (const [key, value] of Object.entries(params)) {
                if (key.toLowerCase() === 'error') {
                    msg += `%c${capitalize(key)}: %c${value}\n`;
                    color.push('color: #df004f;', 'color: #ff0000;');
                }
                else {
                    msg += `%c${capitalize(key)}: %c${value}\n`;
                    color.push('color: #3AA6D0;', 'color: #000;');
                }
            }
        }
        ConsoleLogger.error(msg, ...color);
    }
    /**
     * Log warn messages in pretty format.
     *
     * @param message log message
     * @param params additional params for verbose log
     */
    static prettyWarn(message, params) {
        if (!this.isLoggingEnabled()) {
            return;
        }
        let msg = `%c${message}\n`;
        const color = [
            'color: #ffbe00;'
        ];
        if (!isEmpty(params)) {
            for (const [key, value] of Object.entries(params)) {
                msg += `%c${capitalize(key)}: %c${value}\n`;
                color.push('color: #3AA6D0;', 'color: #000;');
            }
        }
        ConsoleLogger.warn(msg, ...color);
    }
    static isLoggingEnabled() {
        return (!LibConfig.getConfig().isProduction && LibConfig.getConfig().logs.verboseLogs)
            || LibConfig.getConfig().logs.verboseLogs;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uc29sZS1sb2dnZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtaGF0ZW9hcy1jbGllbnQvc3JjL2xpYi9sb2dnZXIvY29uc29sZS1sb2dnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUUzRCw2Q0FBNkM7QUFDN0MsTUFBTSxPQUFPLGFBQWE7SUFFakIsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFhLEVBQUUsR0FBRyxjQUFxQjtRQUN4RCxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUU7WUFDNUIsT0FBTztTQUNSO1FBQ0QsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxjQUFjLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRU0sTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFhLEVBQUUsR0FBRyxjQUFxQjtRQUN4RCxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUU7WUFDNUIsT0FBTztTQUNSO1FBQ0QsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxjQUFjLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRU0sTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFhLEVBQUUsR0FBRyxjQUFxQjtRQUN6RCxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUU7WUFDNUIsT0FBTztTQUNSO1FBQ0QsT0FBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsR0FBRyxjQUFjLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQWUsRUFBRSxNQUFlO1FBQ3ZELElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRTtZQUM1QixPQUFPO1NBQ1I7UUFFRCxJQUFJLEdBQUcsR0FBRyxLQUFNLE9BQVEsSUFBSSxDQUFDO1FBQzdCLE1BQU0sS0FBSyxHQUFHO1lBQ1osaUJBQWlCO1NBQ2xCLENBQUM7UUFFRixJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ3BCLEtBQUssTUFBTSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUNqRCxJQUFJLEdBQUcsQ0FBQyxXQUFXLEVBQUUsS0FBSyxRQUFRLEVBQUU7b0JBQ2xDLEdBQUcsSUFBSSxLQUFNLFVBQVUsQ0FBQyxHQUFHLENBQUUsT0FBUSxLQUFNLElBQUksQ0FBQztvQkFDaEQsS0FBSyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO2lCQUNsRDtxQkFBTTtvQkFDTCxHQUFHLElBQUksS0FBTSxTQUFTLENBQUMsR0FBRyxDQUFFLE9BQVEsS0FBTSxJQUFJLENBQUM7b0JBQy9DLEtBQUssQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztpQkFDbEQ7YUFDRjtTQUNGO1FBRUQsYUFBYSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRU0sTUFBTSxDQUFDLGdCQUFnQixDQUFDLE9BQWUsRUFBRSxNQUFlO1FBQzdELElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRTtZQUM1QixPQUFPO1NBQ1I7UUFFRCxNQUFNLEdBQUcsR0FBRyxLQUFNLE9BQVEsSUFBSSxDQUFDO1FBQy9CLE1BQU0sS0FBSyxHQUFHO1lBQ1osaUJBQWlCO1NBQ2xCLENBQUM7UUFFRixhQUFhLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0ksTUFBTSxDQUFDLGtCQUFrQixDQUFDLFlBQW9CLEVBQUUsT0FBZSxFQUFFLE1BQWU7UUFDckYsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFO1lBQzVCLE9BQU87U0FDUjtRQUVELElBQUksR0FBRyxHQUFHLEtBQU0sWUFBYSxNQUFPLE9BQVEsSUFBSSxDQUFDO1FBQ2pELE1BQU0sS0FBSyxHQUFHO1lBQ1osaUJBQWlCO1lBQ2pCLGlCQUFpQjtTQUNsQixDQUFDO1FBRUYsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUNwQixLQUFLLE1BQU0sQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDakQsSUFBSSxHQUFHLENBQUMsV0FBVyxFQUFFLEtBQUssUUFBUSxFQUFFO29CQUNsQyxHQUFHLElBQUksS0FBTSxVQUFVLENBQUMsR0FBRyxDQUFFLE9BQVEsS0FBTSxJQUFJLENBQUM7b0JBQ2hELEtBQUssQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztpQkFDbEQ7cUJBQU07b0JBQ0wsR0FBRyxJQUFJLEtBQU0sU0FBUyxDQUFDLEdBQUcsQ0FBRSxPQUFRLEtBQU0sSUFBSSxDQUFDO29CQUMvQyxLQUFLLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLGlCQUFpQixDQUFDLENBQUM7aUJBQ2xEO2FBQ0Y7U0FDRjtRQUVELGFBQWEsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ksTUFBTSxDQUFDLFdBQVcsQ0FBQyxPQUFlLEVBQUUsTUFBZTtRQUN4RCxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUU7WUFDNUIsT0FBTztTQUNSO1FBRUQsSUFBSSxHQUFHLEdBQUcsS0FBTSxPQUFRLElBQUksQ0FBQztRQUM3QixNQUFNLEtBQUssR0FBRztZQUNaLGlCQUFpQjtTQUNsQixDQUFDO1FBRUYsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUNwQixLQUFLLE1BQU0sQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDakQsSUFBSSxHQUFHLENBQUMsV0FBVyxFQUFFLEtBQUssT0FBTyxFQUFFO29CQUNqQyxHQUFHLElBQUksS0FBTSxVQUFVLENBQUMsR0FBRyxDQUFFLE9BQVEsS0FBTSxJQUFJLENBQUM7b0JBQ2hELEtBQUssQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztpQkFDbEQ7cUJBQU07b0JBQ0wsR0FBRyxJQUFJLEtBQU0sVUFBVSxDQUFDLEdBQUcsQ0FBRSxPQUFRLEtBQU0sSUFBSSxDQUFDO29CQUNoRCxLQUFLLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLGNBQWMsQ0FBQyxDQUFDO2lCQUMvQzthQUNGO1NBQ0Y7UUFFRCxhQUFhLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEtBQUssQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNJLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBZSxFQUFFLE1BQWU7UUFDdkQsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFO1lBQzVCLE9BQU87U0FDUjtRQUVELElBQUksR0FBRyxHQUFHLEtBQU0sT0FBUSxJQUFJLENBQUM7UUFDN0IsTUFBTSxLQUFLLEdBQUc7WUFDWixpQkFBaUI7U0FDbEIsQ0FBQztRQUVGLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDcEIsS0FBSyxNQUFNLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUU7Z0JBQ2pELEdBQUcsSUFBSSxLQUFNLFVBQVUsQ0FBQyxHQUFHLENBQUUsT0FBUSxLQUFNLElBQUksQ0FBQztnQkFDaEQsS0FBSyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxjQUFjLENBQUMsQ0FBQzthQUMvQztTQUNGO1FBRUQsYUFBYSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRU8sTUFBTSxDQUFDLGdCQUFnQjtRQUM3QixPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUMsWUFBWSxJQUFJLFNBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO2VBQ2pGLFNBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzlDLENBQUM7Q0FFRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExpYkNvbmZpZyB9IGZyb20gJy4uL2NvbmZpZy9saWItY29uZmlnJztcbmltcG9ydCB7IGNhbWVsQ2FzZSwgY2FwaXRhbGl6ZSwgaXNFbXB0eSB9IGZyb20gJ2xvZGFzaC1lcyc7XG5cbi8qIHRzbGludDpkaXNhYmxlOnZhcmlhYmxlLW5hbWUgbm8tY29uc29sZSAqL1xuZXhwb3J0IGNsYXNzIENvbnNvbGVMb2dnZXIge1xuXG4gIHB1YmxpYyBzdGF0aWMgaW5mbyhtZXNzYWdlPzogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNMb2dnaW5nRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUuaW5mbyhtZXNzYWdlLCAuLi5vcHRpb25hbFBhcmFtcyk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHdhcm4obWVzc2FnZT86IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlzTG9nZ2luZ0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLndhcm4obWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBlcnJvcihtZXNzYWdlPzogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNMb2dnaW5nRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvZyBpbmZvIG1lc3NhZ2VzIGluIHByZXR0eSBmb3JtYXQuXG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlIGxvZyBtZXNzYWdlXG4gICAqIEBwYXJhbSBwYXJhbXMgYWRkaXRpb25hbCBwYXJhbXMgZm9yIHZlcmJvc2UgbG9nXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHByZXR0eUluZm8obWVzc2FnZTogc3RyaW5nLCBwYXJhbXM/OiBvYmplY3QpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNMb2dnaW5nRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IG1zZyA9IGAlYyR7IG1lc3NhZ2UgfVxcbmA7XG4gICAgY29uc3QgY29sb3IgPSBbXG4gICAgICAnY29sb3I6ICMyMDFBQjM7J1xuICAgIF07XG5cbiAgICBpZiAoIWlzRW1wdHkocGFyYW1zKSkge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocGFyYW1zKSkge1xuICAgICAgICBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09ICdyZXN1bHQnKSB7XG4gICAgICAgICAgbXNnICs9IGAlYyR7IGNhcGl0YWxpemUoa2V5KSB9OiAlYyR7IHZhbHVlIH1cXG5gO1xuICAgICAgICAgIGNvbG9yLnB1c2goJ2NvbG9yOiAjM0FBNkQwOycsICdjb2xvcjogIzAwQkE0NTsnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtc2cgKz0gYCVjJHsgY2FtZWxDYXNlKGtleSkgfTogJWMkeyB2YWx1ZSB9XFxuYDtcbiAgICAgICAgICBjb2xvci5wdXNoKCdjb2xvcjogIzNBQTZEMDsnLCAnY29sb3I6IGRlZmF1bHQ7Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBDb25zb2xlTG9nZ2VyLmluZm8obXNnLCAuLi5jb2xvcik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIG9iamVjdFByZXR0eUluZm8obWVzc2FnZTogc3RyaW5nLCBwYXJhbXM/OiBvYmplY3QpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNMb2dnaW5nRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbXNnID0gYCVjJHsgbWVzc2FnZSB9XFxuYDtcbiAgICBjb25zdCBjb2xvciA9IFtcbiAgICAgICdjb2xvcjogIzIwMUFCMzsnXG4gICAgXTtcblxuICAgIENvbnNvbGVMb2dnZXIuaW5mbyhtc2csIC4uLmNvbG9yLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvZyByZXNvdXJjZSBpbmZvIG1lc3NhZ2VzIGluIHByZXR0eSBmb3JtYXQuXG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlIGxvZyBtZXNzYWdlXG4gICAqIEBwYXJhbSByZXNvdXJjZU5hbWUgcmVzb3VyY2UgbmFtZVxuICAgKiBAcGFyYW0gcGFyYW1zIGFkZGl0aW9uYWwgcGFyYW1zIGZvciB2ZXJib3NlIGxvZ1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyByZXNvdXJjZVByZXR0eUluZm8ocmVzb3VyY2VOYW1lOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgcGFyYW1zPzogb2JqZWN0KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlzTG9nZ2luZ0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBtc2cgPSBgJWMkeyByZXNvdXJjZU5hbWUgfSAlYyR7IG1lc3NhZ2UgfVxcbmA7XG4gICAgY29uc3QgY29sb3IgPSBbXG4gICAgICAnY29sb3I6ICNEQTAwNUM7JyxcbiAgICAgICdjb2xvcjogIzIwMUFCMzsnXG4gICAgXTtcblxuICAgIGlmICghaXNFbXB0eShwYXJhbXMpKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwYXJhbXMpKSB7XG4gICAgICAgIGlmIChrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ3Jlc3VsdCcpIHtcbiAgICAgICAgICBtc2cgKz0gYCVjJHsgY2FwaXRhbGl6ZShrZXkpIH06ICVjJHsgdmFsdWUgfVxcbmA7XG4gICAgICAgICAgY29sb3IucHVzaCgnY29sb3I6ICMzQUE2RDA7JywgJ2NvbG9yOiAjMDBCQTQ1OycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1zZyArPSBgJWMkeyBjYW1lbENhc2Uoa2V5KSB9OiAlYyR7IHZhbHVlIH1cXG5gO1xuICAgICAgICAgIGNvbG9yLnB1c2goJ2NvbG9yOiAjM0FBNkQwOycsICdjb2xvcjogZGVmYXVsdDsnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIENvbnNvbGVMb2dnZXIuaW5mbyhtc2csIC4uLmNvbG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgZXJyb3IgbWVzc2FnZXMgaW4gcHJldHR5IGZvcm1hdC5cbiAgICpcbiAgICogQHBhcmFtIG1lc3NhZ2UgbG9nIG1lc3NhZ2VcbiAgICogQHBhcmFtIHBhcmFtcyBhZGRpdGlvbmFsIHBhcmFtcyBmb3IgdmVyYm9zZSBsb2dcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcHJldHR5RXJyb3IobWVzc2FnZTogc3RyaW5nLCBwYXJhbXM/OiBvYmplY3QpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNMb2dnaW5nRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IG1zZyA9IGAlYyR7IG1lc3NhZ2UgfVxcbmA7XG4gICAgY29uc3QgY29sb3IgPSBbXG4gICAgICAnY29sb3I6ICNkZjAwNGY7J1xuICAgIF07XG5cbiAgICBpZiAoIWlzRW1wdHkocGFyYW1zKSkge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocGFyYW1zKSkge1xuICAgICAgICBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICBtc2cgKz0gYCVjJHsgY2FwaXRhbGl6ZShrZXkpIH06ICVjJHsgdmFsdWUgfVxcbmA7XG4gICAgICAgICAgY29sb3IucHVzaCgnY29sb3I6ICNkZjAwNGY7JywgJ2NvbG9yOiAjZmYwMDAwOycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1zZyArPSBgJWMkeyBjYXBpdGFsaXplKGtleSkgfTogJWMkeyB2YWx1ZSB9XFxuYDtcbiAgICAgICAgICBjb2xvci5wdXNoKCdjb2xvcjogIzNBQTZEMDsnLCAnY29sb3I6ICMwMDA7Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBDb25zb2xlTG9nZ2VyLmVycm9yKG1zZywgLi4uY29sb3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvZyB3YXJuIG1lc3NhZ2VzIGluIHByZXR0eSBmb3JtYXQuXG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlIGxvZyBtZXNzYWdlXG4gICAqIEBwYXJhbSBwYXJhbXMgYWRkaXRpb25hbCBwYXJhbXMgZm9yIHZlcmJvc2UgbG9nXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHByZXR0eVdhcm4obWVzc2FnZTogc3RyaW5nLCBwYXJhbXM/OiBvYmplY3QpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNMb2dnaW5nRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IG1zZyA9IGAlYyR7IG1lc3NhZ2UgfVxcbmA7XG4gICAgY29uc3QgY29sb3IgPSBbXG4gICAgICAnY29sb3I6ICNmZmJlMDA7J1xuICAgIF07XG5cbiAgICBpZiAoIWlzRW1wdHkocGFyYW1zKSkge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocGFyYW1zKSkge1xuICAgICAgICBtc2cgKz0gYCVjJHsgY2FwaXRhbGl6ZShrZXkpIH06ICVjJHsgdmFsdWUgfVxcbmA7XG4gICAgICAgIGNvbG9yLnB1c2goJ2NvbG9yOiAjM0FBNkQwOycsICdjb2xvcjogIzAwMDsnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBDb25zb2xlTG9nZ2VyLndhcm4obXNnLCAuLi5jb2xvcik7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBpc0xvZ2dpbmdFbmFibGVkKCkge1xuICAgIHJldHVybiAoIUxpYkNvbmZpZy5nZXRDb25maWcoKS5pc1Byb2R1Y3Rpb24gJiYgTGliQ29uZmlnLmdldENvbmZpZygpLmxvZ3MudmVyYm9zZUxvZ3MpXG4gICAgICB8fCBMaWJDb25maWcuZ2V0Q29uZmlnKCkubG9ncy52ZXJib3NlTG9ncztcbiAgfVxuXG59XG4iXX0=